# TP2 : TP2 : Environnement virtuel

## I. Topologie réseau

☀️ Sur node1.lan1.tp2


```
[solar@Node1 ~]$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:8c:58:ed brd ff:ff:ff:ff:ff:ff
    inet 192.168.179.2/24 brd 192.168.179.255 scope global noprefixroute enp0s8
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe8c:58ed/64 scope link dadfailed tentative
       valid_lft forever preferred_lft forever
```

```
[solar@Node1 ~]$ ip route show
192.168.115.0/24 via 10.1.1.254 dev enp0s8 proto static metric 100
192.168.179.0/24 dev enp0s8 proto kernel scope link src 192.168.179.2 metric 100
```

```
[solar@Node1 ~]$ ping 10.1.2.12
PING 10.1.2.12 (10.1.2.12) 56(84) bytes of data.
64 bytes from 10.1.2.12: icmp_seq=1 ttl=63 time=2.31 ms
64 bytes from 10.1.2.12: icmp_seq=2 ttl=63 time=2.12 ms
64 bytes from 10.1.2.12: icmp_seq=3 ttl=63 time=1.67 ms
64 bytes from 10.1.2.12: icmp_seq=4 ttl=63 time=1.74 ms
64 bytes from 10.1.2.12: icmp_seq=5 ttl=63 time=2.51 ms
^C
--- 10.1.2.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4008ms
rtt min/avg/max/mdev = 1.674/2.073/2.514/0.308 ms
```

```
[solar@Node1 ~]$ traceroute
[solar@Node1 ~]$ traceroute 10.1.2.12
traceroute to 10.1.2.12 (10.1.2.12), 30 hops max, 60 byte packets
 1  10.1.1.254 (10.1.1.254)  1.529 ms  1.465 ms  1.439 ms
 2  10.1.2.12 (10.1.2.12)  3.521 ms !X  3.439 ms !X  3.365 ms !X
```

## II. Interlude accès internet

☀️ Sur router.tp2

```	
[solar@routeur ~]$ ping 8.8.8.8
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=115 time=17.4 ms
64 bytes from 8.8.8.8: icmp_seq=2 ttl=115 time=17.6 ms
64 bytes from 8.8.8.8: icmp_seq=3 ttl=115 time=16.5 ms
64 bytes from 8.8.8.8: icmp_seq=4 ttl=115 time=16.0 ms
^C
--- 8.8.8.8 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3012ms
rtt min/avg/max/mdev = 15.974/16.871/17.640/0.682 ms
```

```
[solar@routeur ~]$ ping google.com
PING google.com (216.58.215.46) 56(84) bytes of data.
64 bytes from par21s17-in-f14.1e100.net (216.58.215.46): icmp_seq=1 ttl=116 time=14.6 ms
64 bytes from par21s17-in-f14.1e100.net (216.58.215.46): icmp_seq=2 ttl=116 time=15.6 ms
64 bytes from par21s17-in-f14.1e100.net (216.58.215.46): icmp_seq=3 ttl=116 time=16.3 ms
^C
--- google.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2005ms
rtt min/avg/max/mdev = 14.614/15.520/16.329/0.703 ms
```

☀️ Accès internet LAN1 et LAN2

```
default via 10.1.1.254 dev enp0s3
```

```
default via 10.1.2.254 dev enp0s3
```

```
[solar@Node2 etc]$ sudo cat resolv.conf
# Generated by NetworkManager
search lan2.tp1
nameserver 192.168.1.254
nameserver 1.1.1.1
```

```
[solar@Node2 etc]$ ping google.com
PING google.com (142.250.179.110) 56(84) bytes of data.
64 bytes from par21s20-in-f14.1e100.net (142.250.179.110): icmp_seq=1 ttl=116 time=15.0 ms
64 bytes from par21s20-in-f14.1e100.net (142.250.179.110): icmp_seq=2 ttl=116 time=15.5 ms
64 bytes from par21s20-in-f14.1e100.net (142.250.179.110): icmp_seq=3 ttl=116 time=15.2 ms
64 bytes from par21s20-in-f14.1e100.net (142.250.179.110): icmp_seq=4 ttl=116 time=17.6 ms
^C
--- google.com ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3011ms
rtt min/avg/max/mdev = 15.008/15.821/17.565/1.020 ms
```

```
[solar@Node2 etc]$ ping google.com
PING google.com (142.250.179.110) 56(84) bytes of data.
64 bytes from par21s20-in-f14.1e100.net (142.250.179.110): icmp_seq=1 ttl=116 time=14.0 ms
64 bytes from par21s20-in-f14.1e100.net (142.250.179.110): icmp_seq=2 ttl=116 time=15.5 ms
64 bytes from par21s20-in-f14.1e100.net (142.250.179.110): icmp_seq=3 ttl=116 time=16.3 ms
64 bytes from par21s20-in-f14.1e100.net (142.250.179.110): icmp_seq=4 ttl=116 time=15.2 ms
^C
--- google.com ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3006ms
rtt min/avg/max/mdev = 14.018/15.274/16.313/0.825 ms
```

## III. Services réseau

☀️ Sur web.lan2.tp2

```
[solar@web ~]$ sudo dnf install nginx -y
```

```
[solar@web ~]$ sudo mkdir -p /var/www/site_nul
```

```
[solar@web ~]$ sudo nano /var/www/site_nul/index.html
```

```
[solar@web site_nul]$ sudo chown -R solar /var/www/site_nul
```

```
[solar@web site_nul]$ sudo chmod -R 755 /var/www/site_nul
```

```
[solar@web site_nul]$ sudo systemctl start nginx
```

```
[solar@web site_nul]$ sudo systemctl enable nginx
```

```
[solar@web site_nul]$ sudo firewall-cmd --add-port=80/tcp --permanent
```

```
[solar@web site_nul]$ sudo firewall-cmd --reload
```
